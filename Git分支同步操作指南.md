# Git åˆ†æ”¯åŒæ­¥æ“ä½œæŒ‡å— - SQLBot Fork é¡¹ç›®

## ğŸ“‹ å½“å‰çŠ¶æ€åˆ†æ

### ç°æœ‰é…ç½®
- **Origin (ä½ çš„ Fork)**: https://github.com/1234-i/weisoftSQLAI.git
- **æœ¬åœ°åˆ†æ”¯**: 
  - `main` - åœç•™åœ¨ v1.1.4 (commit: f79bdcf)
  - `weisoftSQLAI` - åŒ…å«è‡ªå®šä¹‰ä¿®æ”¹ (2ä¸ªæ–°æäº¤)
- **ä¸Šæ¸¸å®˜æ–¹ä»“åº“**: https://github.com/dataease/SQLBot (éœ€è¦æ·»åŠ )

### è‡ªå®šä¹‰ä¿®æ”¹
åœ¨ `weisoftSQLAI` åˆ†æ”¯ä¸Šçš„ä¿®æ”¹:
1. e398614 - æŠŠç³»ç»Ÿé¢œè‰²ä¿®æ”¹ä¸ºç´«è‰²,å¹¶ä¸”æ·»åŠ äº†æµ‹è¯•æ•°æ®
2. 8f07648 - ä¿®æ”¹äº†ä¸€äº›å›¾æ ‡

---

## ğŸ¯ ç›®æ ‡

1. âœ… æ·»åŠ ä¸Šæ¸¸å®˜æ–¹ä»“åº“ä½œä¸º remote
2. âœ… å°†æœ¬åœ° `main` åˆ†æ”¯æ›´æ–°åˆ°å®˜æ–¹ v1.2
3. âœ… å°† `weisoftSQLAI` åˆ†æ”¯çš„è‡ªå®šä¹‰ä¿®æ”¹åˆå¹¶åˆ° v1.2
4. âœ… å»ºç«‹é•¿æœŸåŒæ­¥æœºåˆ¶

---

## âš ï¸ é‡è¦æç¤º

**æ“ä½œå‰å¿…è¯»**:
- æ‰€æœ‰æ“ä½œéƒ½æ˜¯å¯é€†çš„,ä¸ç”¨æ‹…å¿ƒ
- æˆ‘ä»¬ä¼šå…ˆåˆ›å»ºå¤‡ä»½åˆ†æ”¯
- é‡åˆ°å†²çªæ—¶å¯ä»¥éšæ—¶ä¸­æ­¢
- å»ºè®®åœ¨æ“ä½œå‰æäº¤æ‰€æœ‰æœªä¿å­˜çš„æ›´æ”¹

---

## ğŸ“¦ æ­¥éª¤ 1: åˆ›å»ºå¤‡ä»½åˆ†æ”¯ (å®‰å…¨ç¬¬ä¸€!)

åœ¨å¼€å§‹ä»»ä½•æ“ä½œå‰,å…ˆåˆ›å»ºå¤‡ä»½:

```bash
# å¤‡ä»½å½“å‰çš„ weisoftSQLAI åˆ†æ”¯
git branch weisoftSQLAI-backup

# å¤‡ä»½ main åˆ†æ”¯
git checkout main
git branch main-backup

# è¿”å›å·¥ä½œåˆ†æ”¯
git checkout weisoftSQLAI

# éªŒè¯å¤‡ä»½
git branch
```

**é¢„æœŸç»“æœ**: çœ‹åˆ° `weisoftSQLAI-backup` å’Œ `main-backup` åˆ†æ”¯

---

## ğŸ”— æ­¥éª¤ 2: æ·»åŠ ä¸Šæ¸¸å®˜æ–¹ä»“åº“

```bash
# æ·»åŠ ä¸Šæ¸¸ä»“åº“ (upstream)
git remote add upstream https://github.com/dataease/SQLBot.git

# éªŒè¯ remote é…ç½®
git remote -v
```

**é¢„æœŸç»“æœ**:
```
origin    https://github.com/1234-i/weisoftSQLAI.git (fetch)
origin    https://github.com/1234-i/weisoftSQLAI.git (push)
upstream  https://github.com/dataease/SQLBot.git (fetch)
upstream  https://github.com/dataease/SQLBot.git (push)
```

---

## ğŸ“¥ æ­¥éª¤ 3: æ‹‰å–ä¸Šæ¸¸æœ€æ–°ä»£ç 

```bash
# æ‹‰å–ä¸Šæ¸¸æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾
git fetch upstream

# æŸ¥çœ‹ä¸Šæ¸¸çš„æ ‡ç­¾ (ç‰ˆæœ¬)
git tag -l | grep -E "v1\.[12]"

# æˆ–è€…æŸ¥çœ‹ä¸Šæ¸¸çš„æäº¤å†å²
git log upstream/main --oneline -10
```

**é¢„æœŸç»“æœ**: çœ‹åˆ° v1.2.0 æˆ–ç±»ä¼¼çš„æ ‡ç­¾

---

## ğŸ”„ æ­¥éª¤ 4: æ›´æ–°æœ¬åœ° main åˆ†æ”¯åˆ° v1.2

### æ–¹æ³• A: ä½¿ç”¨ merge (æ¨è,ä¿ç•™å®Œæ•´å†å²)

```bash
# åˆ‡æ¢åˆ° main åˆ†æ”¯
git checkout main

# åˆå¹¶ä¸Šæ¸¸çš„ main åˆ†æ”¯
git merge upstream/main

# æˆ–è€…åˆå¹¶ç‰¹å®šçš„ v1.2 æ ‡ç­¾
git merge v1.2.0  # å¦‚æœå­˜åœ¨ v1.2.0 æ ‡ç­¾

# æŸ¥çœ‹æ›´æ–°åçš„çŠ¶æ€
git log --oneline -10
```

### æ–¹æ³• B: ä½¿ç”¨ rebase (çº¿æ€§å†å²,ä½†ä¼šæ”¹å†™å†å²)

```bash
# åˆ‡æ¢åˆ° main åˆ†æ”¯
git checkout main

# Rebase åˆ°ä¸Šæ¸¸ main
git rebase upstream/main

# å¦‚æœé‡åˆ°å†²çª,è§£å†³åç»§ç»­
git rebase --continue
```

**æ¨èä½¿ç”¨æ–¹æ³• A (merge)** å› ä¸º:
- ä¿ç•™å®Œæ•´çš„å†å²è®°å½•
- ä¸ä¼šæ”¹å†™å·²å‘å¸ƒçš„æäº¤
- æ›´å®‰å…¨,æ˜“äºå›æ»š

---

## ğŸ”€ æ­¥éª¤ 5: å°†è‡ªå®šä¹‰ä¿®æ”¹åˆå¹¶åˆ°æ›´æ–°åçš„ main

ç°åœ¨ `main` åˆ†æ”¯å·²ç»æ˜¯ v1.2 äº†,æˆ‘ä»¬éœ€è¦å°† `weisoftSQLAI` çš„ä¿®æ”¹åº”ç”¨ä¸Šå»ã€‚

### ç­–ç•¥é€‰æ‹©

#### é€‰é¡¹ 1: Rebase (æ¨è â­)

**ä¼˜ç‚¹**:
- ä¿æŒçº¿æ€§çš„æäº¤å†å²
- ä½ çš„è‡ªå®šä¹‰æäº¤ä¼šå‡ºç°åœ¨ v1.2 ä¹‹å
- å†å²æ›´æ¸…æ™°,æ˜“äºç†è§£

**ç¼ºç‚¹**:
- ä¼šæ”¹å†™ `weisoftSQLAI` åˆ†æ”¯çš„å†å²
- å¦‚æœå·²ç»æ¨é€åˆ°è¿œç¨‹,éœ€è¦å¼ºåˆ¶æ¨é€

**æ“ä½œæ­¥éª¤**:

```bash
# åˆ‡æ¢åˆ° weisoftSQLAI åˆ†æ”¯
git checkout weisoftSQLAI

# Rebase åˆ°æ›´æ–°åçš„ main åˆ†æ”¯
git rebase main

# å¦‚æœé‡åˆ°å†²çª,ä¼šæš‚åœå¹¶æç¤º
# è§£å†³å†²çªå:
git add <å†²çªæ–‡ä»¶>
git rebase --continue

# å¦‚æœæƒ³ä¸­æ­¢ rebase:
git rebase --abort
```

#### é€‰é¡¹ 2: Merge (ä¿å®ˆç­–ç•¥)

**ä¼˜ç‚¹**:
- ä¸æ”¹å†™å†å²
- ä¿ç•™æ‰€æœ‰åˆ†æ”¯ä¿¡æ¯
- æ›´å®‰å…¨

**ç¼ºç‚¹**:
- å†å²å›¾ä¼šæœ‰åˆ†å‰
- æäº¤å†å²è¾ƒå¤æ‚

**æ“ä½œæ­¥éª¤**:

```bash
# åˆ‡æ¢åˆ° weisoftSQLAI åˆ†æ”¯
git checkout weisoftSQLAI

# åˆå¹¶æ›´æ–°åçš„ main åˆ†æ”¯
git merge main

# è§£å†³å†²çª(å¦‚æœæœ‰)
git add <å†²çªæ–‡ä»¶>
git commit
```

---

## ğŸ› ï¸ æ­¥éª¤ 6: å¤„ç†åˆå¹¶å†²çª (å¦‚æœå‡ºç°)

### è¯†åˆ«å†²çª

```bash
# æŸ¥çœ‹å†²çªæ–‡ä»¶
git status

# æŸ¥çœ‹å†²çªå†…å®¹
git diff
```

### è§£å†³å†²çª

å†²çªæ–‡ä»¶ä¼šåŒ…å«ç±»ä¼¼è¿™æ ·çš„æ ‡è®°:

```
<<<<<<< HEAD (ä½ çš„ä¿®æ”¹)
const customColor = ref('#6366F1')  // è“ç´«è‰²
=======
const customColor = ref('#1CBA90')  // å®˜æ–¹çš„ç»¿è‰²
>>>>>>> main (ä¸Šæ¸¸çš„ä¿®æ”¹)
```

**è§£å†³æ­¥éª¤**:

1. **æ‰‹åŠ¨ç¼–è¾‘å†²çªæ–‡ä»¶**,ä¿ç•™ä½ éœ€è¦çš„å†…å®¹:
   ```javascript
   const customColor = ref('#6366F1')  // ä¿ç•™ä½ çš„è“ç´«è‰²
   ```

2. **åˆ é™¤å†²çªæ ‡è®°** (`<<<<<<<`, `=======`, `>>>>>>>`)

3. **æ ‡è®°ä¸ºå·²è§£å†³**:
   ```bash
   git add <å†²çªæ–‡ä»¶>
   ```

4. **ç»§ç»­æ“ä½œ**:
   ```bash
   # å¦‚æœæ˜¯ rebase
   git rebase --continue
   
   # å¦‚æœæ˜¯ merge
   git commit
   ```

### å¸¸è§å†²çªåœºæ™¯

#### åœºæ™¯ 1: ä¸»é¢˜é¢œè‰²å†²çª
- **ä½ çš„ä¿®æ”¹**: è“ç´«è‰² `#6366F1`
- **å®˜æ–¹ä¿®æ”¹**: å¯èƒ½æ›´æ–°äº†é¢œè‰²ç³»ç»Ÿ
- **è§£å†³**: ä¿ç•™ä½ çš„é¢œè‰²,ä½†æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„é¢œè‰²å˜é‡éœ€è¦åŒæ­¥ä¿®æ”¹

#### åœºæ™¯ 2: é…ç½®æ–‡ä»¶å†²çª
- **ä½ çš„ä¿®æ”¹**: è‡ªå®šä¹‰é…ç½®
- **å®˜æ–¹ä¿®æ”¹**: æ–°å¢é…ç½®é¡¹
- **è§£å†³**: åˆå¹¶ä¸¤è€…,ä¿ç•™ä½ çš„è‡ªå®šä¹‰ + æ·»åŠ å®˜æ–¹æ–°é…ç½®

#### åœºæ™¯ 3: ä¾èµ–ç‰ˆæœ¬å†²çª
- **ä½ çš„ä¿®æ”¹**: å¯èƒ½æ²¡æœ‰
- **å®˜æ–¹ä¿®æ”¹**: å‡çº§äº†ä¾èµ–ç‰ˆæœ¬
- **è§£å†³**: ä½¿ç”¨å®˜æ–¹çš„æ–°ç‰ˆæœ¬

---

## ğŸ” æ­¥éª¤ 7: éªŒè¯åˆå¹¶ç»“æœ

```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline --graph -20

# æŸ¥çœ‹ä½ çš„è‡ªå®šä¹‰ä¿®æ”¹æ˜¯å¦è¿˜åœ¨
git log --oneline --author="ä½ çš„åå­—" -10

# æ£€æŸ¥å…³é”®æ–‡ä»¶
git show HEAD:frontend/src/stores/appearance.ts | grep -A 2 "customColor"

# è¿è¡Œæµ‹è¯• (å¦‚æœæœ‰)
cd frontend && npm run build
cd backend && python -m pytest
```

---

## ğŸ“¤ æ­¥éª¤ 8: æ¨é€åˆ°è¿œç¨‹ä»“åº“

### å¦‚æœä½¿ç”¨äº† Rebase (æ”¹å†™äº†å†å²)

```bash
# å¼ºåˆ¶æ¨é€ weisoftSQLAI åˆ†æ”¯ (è°¨æ…!)
git push origin weisoftSQLAI --force-with-lease

# æ¨é€æ›´æ–°åçš„ main åˆ†æ”¯
git checkout main
git push origin main
```

**æ³¨æ„**: `--force-with-lease` æ¯” `--force` æ›´å®‰å…¨,å®ƒä¼šæ£€æŸ¥è¿œç¨‹æ˜¯å¦æœ‰å…¶ä»–äººçš„æäº¤

### å¦‚æœä½¿ç”¨äº† Merge (æ²¡æœ‰æ”¹å†™å†å²)

```bash
# æ­£å¸¸æ¨é€
git push origin weisoftSQLAI

# æ¨é€ main åˆ†æ”¯
git checkout main
git push origin main
```

---

## ğŸ”„ æ­¥éª¤ 9: å»ºç«‹é•¿æœŸåŒæ­¥æœºåˆ¶

### å®šæœŸåŒæ­¥ä¸Šæ¸¸æ›´æ–°

åˆ›å»ºä¸€ä¸ªè„šæœ¬ `sync-upstream.sh`:

```bash
#!/bin/bash
# åŒæ­¥ä¸Šæ¸¸å®˜æ–¹ä»“åº“çš„è„šæœ¬

echo "ğŸ”„ å¼€å§‹åŒæ­¥ä¸Šæ¸¸ä»“åº“..."

# 1. æ‹‰å–ä¸Šæ¸¸æœ€æ–°ä»£ç 
echo "ğŸ“¥ æ‹‰å–ä¸Šæ¸¸ä»£ç ..."
git fetch upstream

# 2. åˆ‡æ¢åˆ° main åˆ†æ”¯
echo "ğŸ”€ åˆ‡æ¢åˆ° main åˆ†æ”¯..."
git checkout main

# 3. åˆå¹¶ä¸Šæ¸¸ main
echo "ğŸ”— åˆå¹¶ä¸Šæ¸¸æ›´æ–°..."
git merge upstream/main

# 4. æ¨é€åˆ°ä½ çš„ fork
echo "ğŸ“¤ æ¨é€åˆ°è¿œç¨‹..."
git push origin main

# 5. åˆ‡æ¢å›å·¥ä½œåˆ†æ”¯
echo "ğŸ”™ åˆ‡æ¢å› weisoftSQLAI åˆ†æ”¯..."
git checkout weisoftSQLAI

# 6. Rebase åˆ°æœ€æ–°çš„ main
echo "ğŸ”„ Rebase å·¥ä½œåˆ†æ”¯..."
git rebase main

echo "âœ… åŒæ­¥å®Œæˆ!"
echo "âš ï¸  å¦‚æœæœ‰å†²çª,è¯·æ‰‹åŠ¨è§£å†³åè¿è¡Œ: git rebase --continue"
```

**ä½¿ç”¨æ–¹æ³•**:

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x sync-upstream.sh

# è¿è¡ŒåŒæ­¥
./sync-upstream.sh
```

---

## ğŸš¨ ç´§æ€¥å›æ»šæ–¹æ¡ˆ

å¦‚æœæ“ä½œå‡ºé”™,å¯ä»¥éšæ—¶å›æ»š:

### å›æ»šåˆ°å¤‡ä»½åˆ†æ”¯

```bash
# å›æ»š weisoftSQLAI åˆ†æ”¯
git checkout weisoftSQLAI
git reset --hard weisoftSQLAI-backup

# å›æ»š main åˆ†æ”¯
git checkout main
git reset --hard main-backup
```

### ä½¿ç”¨ reflog æ¢å¤

```bash
# æŸ¥çœ‹æ“ä½œå†å²
git reflog

# æ¢å¤åˆ°ç‰¹å®šçš„æäº¤
git reset --hard HEAD@{n}  # n æ˜¯ reflog ä¸­çš„ç¼–å·
```

---

## ğŸ“Š æ¨èçš„å·¥ä½œæµç¨‹

### æ—¥å¸¸å¼€å‘

```
upstream/main (å®˜æ–¹)
    â†“ (å®šæœŸåŒæ­¥)
main (ä½ çš„ä¸»åˆ†æ”¯,è·Ÿè¸ªå®˜æ–¹)
    â†“ (rebase)
weisoftSQLAI (ä½ çš„å¼€å‘åˆ†æ”¯)
```

### ç‰ˆæœ¬æ›´æ–°æµç¨‹

1. **å®˜æ–¹å‘å¸ƒæ–°ç‰ˆæœ¬** (å¦‚ v1.3)
2. **åŒæ­¥åˆ° main**: `git checkout main && git merge upstream/main`
3. **æ›´æ–°å¼€å‘åˆ†æ”¯**: `git checkout weisoftSQLAI && git rebase main`
4. **è§£å†³å†²çª** (å¦‚æœæœ‰)
5. **æµ‹è¯•éªŒè¯**
6. **æ¨é€**: `git push origin weisoftSQLAI --force-with-lease`

---

## ğŸ“ æœ€ä½³å®è·µ

1. **é¢‘ç¹åŒæ­¥**: æ¯å‘¨æˆ–æ¯ä¸¤å‘¨åŒæ­¥ä¸€æ¬¡ä¸Šæ¸¸,é¿å…ç§¯ç´¯å¤ªå¤šå†²çª
2. **å°æ­¥æäº¤**: å°†å¤§çš„ä¿®æ”¹æ‹†åˆ†æˆå¤šä¸ªå°æäº¤,ä¾¿äº rebase
3. **æè¿°æ¸…æ™°**: æäº¤ä¿¡æ¯è¦æ¸…æ™°,æ–¹ä¾¿ä»¥åæŸ¥æ‰¾
4. **ä¿ç•™å¤‡ä»½**: é‡è¦æ“ä½œå‰æ€»æ˜¯åˆ›å»ºå¤‡ä»½åˆ†æ”¯
5. **æµ‹è¯•éªŒè¯**: åˆå¹¶ååŠ¡å¿…è¿è¡Œæµ‹è¯•,ç¡®ä¿åŠŸèƒ½æ­£å¸¸

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# æŸ¥çœ‹è¿œç¨‹ä»“åº“
git remote -v

# æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
git branch -a

# æŸ¥çœ‹æäº¤å†å²
git log --oneline --graph -20

# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status

# æ‹‰å–ä¸Šæ¸¸æ›´æ–°
git fetch upstream

# åˆå¹¶ä¸Šæ¸¸ main
git merge upstream/main

# Rebase åˆ° main
git rebase main

# ä¸­æ­¢ rebase
git rebase --abort

# ç»§ç»­ rebase
git rebase --continue

# å¼ºåˆ¶æ¨é€ (è°¨æ…!)
git push origin weisoftSQLAI --force-with-lease

# æŸ¥çœ‹å†²çªæ–‡ä»¶
git diff --name-only --diff-filter=U

# æ¢å¤æ–‡ä»¶
git checkout -- <æ–‡ä»¶å>
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: Rebase å’Œ Merge åˆ°åº•é€‰å“ªä¸ª?

**A**: 
- **Rebase**: é€‚åˆä¸ªäººå¼€å‘åˆ†æ”¯,å†å²æ¸…æ™°
- **Merge**: é€‚åˆå›¢é˜Ÿåä½œ,ä¿ç•™å®Œæ•´å†å²
- **æ¨è**: å¯¹äºä½ çš„åœºæ™¯,ä½¿ç”¨ **Rebase** æ›´åˆé€‚

### Q2: å¼ºåˆ¶æ¨é€ä¼šä¸ä¼šä¸¢å¤±æ•°æ®?

**A**: ä½¿ç”¨ `--force-with-lease` è€Œä¸æ˜¯ `--force`,å®ƒä¼šæ£€æŸ¥è¿œç¨‹æ˜¯å¦æœ‰æ–°æäº¤,æ›´å®‰å…¨

### Q3: å¦‚æœå†²çªå¤ªå¤šæ€ä¹ˆåŠ?

**A**: 
1. å…ˆ `git rebase --abort` ä¸­æ­¢
2. ä½¿ç”¨ `git merge` ä»£æ›¿ `git rebase`
3. æˆ–è€…é€ä¸ªæ–‡ä»¶æ‰‹åŠ¨åˆå¹¶

### Q4: å¦‚ä½•æŸ¥çœ‹æˆ‘åšäº†å“ªäº›è‡ªå®šä¹‰ä¿®æ”¹?

**A**:
```bash
# æŸ¥çœ‹ä¸ main åˆ†æ”¯çš„å·®å¼‚
git diff main..weisoftSQLAI

# æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
git diff main..weisoftSQLAI --name-only
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨æ¸…å•

- [ ] åˆ›å»ºå¤‡ä»½åˆ†æ”¯
- [ ] æ·»åŠ  upstream remote
- [ ] æ‹‰å–ä¸Šæ¸¸ä»£ç 
- [ ] æ›´æ–° main åˆ†æ”¯åˆ° v1.2
- [ ] Rebase weisoftSQLAI åˆ†æ”¯
- [ ] è§£å†³å†²çª (å¦‚æœæœ‰)
- [ ] æµ‹è¯•éªŒè¯
- [ ] æ¨é€åˆ°è¿œç¨‹
- [ ] åˆ›å»ºåŒæ­¥è„šæœ¬

---

éœ€è¦æˆ‘å¸®ä½ æ‰§è¡Œè¿™äº›æ“ä½œå—?æˆ‘å¯ä»¥ä¸€æ­¥æ­¥æŒ‡å¯¼ä½ å®Œæˆ!
